<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Gavin.Wang's blog."><meta name="keywords" content="技术博客, Embeded Linux, linux驱动, linux内核,Python,ARM"><title>MongoDB学习笔记(2) | 王小六的假想敌</title><link rel="stylesheet" type="text/css" href="//fonts.css.network/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.1"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.1"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">MongoDB学习笔记(2)</h1><a id="logo" href="/.">王小六的假想敌</a><p class="description">一起聊聊技术人生那点事儿(Thinking In Tech-Life)</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="Arama"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">MongoDB学习笔记(2)</h1><div class="post-meta"><a href="/2016/07/30/MongoDB学习笔记(2).html#comments" class="comment-count"><i data-thread-key="2016/07/30/MongoDB学习笔记(2).html" class="ds-thread-count"></i>留言<a id="uyan_count_unit" href="/2016/07/30/MongoDB学习笔记(2).html"></a>留言</a><p><span class="date">Jul 30, 2016</span><span><a href="/categories/数据库/" class="category">数据库</a></span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>点击</i></i></span></p></div><div class="post-content"><h2 id="part2-CRUD操作-Creat-Read-Update-Delete"><a href="#part2-CRUD操作-Creat-Read-Update-Delete" class="headerlink" title="part2 CRUD操作(Creat,Read,Update,Delete)"></a>part2 CRUD操作(Creat,Read,Update,Delete)</h2><h3 id="一、基础："><a href="#一、基础：" class="headerlink" title="一、基础："></a>一、基础：</h3><p>1、document(文档)</p>
<p>MongoDB把所有数据存放在类似于JSON数据结构的文档内：<br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123; <span class="attr">"item"</span>: <span class="string">"pencil"</span>, <span class="attr">"qty"</span>: <span class="number">500</span>, <span class="attr">"type"</span>: <span class="string">"no.2"</span> &#125;</div></pre></td></tr></table></figure></p>
<a id="more"></a>
<p>2、collection(集合)</p>
<p>集合是一组相关的文档，MongoDB存储所有的文档在集合里,他们拥有一套共享的通用索引。<br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123; <span class="attr">"item"</span>: <span class="string">"pencil"</span>, <span class="attr">"qty"</span>: <span class="number">500</span>, <span class="attr">"type"</span>: <span class="string">"no.1"</span> &#125;</div><div class="line">&#123; <span class="attr">"item"</span>: <span class="string">"pencil2"</span>, <span class="attr">"qty"</span>: <span class="number">550</span>, <span class="attr">"type"</span>: <span class="string">"no.2"</span> &#125;</div><div class="line">&#123; <span class="attr">"item"</span>: <span class="string">"pencil3"</span>, <span class="attr">"qty"</span>: <span class="number">800</span>, <span class="attr">"type"</span>: <span class="string">"no.3"</span> &#125;</div></pre></td></tr></table></figure></p>
<p>3、database(数据库)</p>
<p>MongoDB的默认数据库为”db”，该数据库存储在data目录中。一个mongodb中可以建立多个数据库。</p>
<h3 id="二、数据库操作："><a href="#二、数据库操作：" class="headerlink" title="二、数据库操作："></a>二、数据库操作：</h3><p>连接及运行mongoDB<br>“<code>show dbs</code>“命令可以显示所有的数据的列表<br>“<code>db</code>“命令可以显示当前数据库对象或集合<br>“<code>use</code>“命令可以连接到一个指定的数据库<br>数据库也通过名字来标识。数据库名可以是满足以下条件的任意UTF-8字符串。<br>  1.不能是空字符串（””)。<br>  2.不得含有’ ‘（空格)、.、$、/、\和\0 (空宇符)。<br>  3.应全部小写。<br>  4.最多64字节。</p>
<p>1、创建数据库：<code>use Database_Name</code><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">use <span class="built_in">test</span>  <span class="comment">##创建名为test的数据库</span></div></pre></td></tr></table></figure></p>
<p>2、删除当前数据库：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">db.dropDatabase()</div></pre></td></tr></table></figure></p>
<h3 id="三、文档操作（以-Collection-Name-col-为例）"><a href="#三、文档操作（以-Collection-Name-col-为例）" class="headerlink" title="三、文档操作（以 Collection_Name = col 为例）"></a>三、文档操作（以 Collection_Name = col 为例）</h3><h4 id="1、插入："><a href="#1、插入：" class="headerlink" title="1、插入："></a>1、插入：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">db.col.insert(Document)     <span class="comment">##插入一条或多组数据</span></div><div class="line">db.col.insertOne(Document)  <span class="comment">##插入一条数据</span></div><div class="line">db.col.insertMany(Document) <span class="comment">##插入多条数据</span></div><div class="line"><span class="comment">##例如：</span></div><div class="line">    db.col.insertOne(&#123; <span class="string">"item"</span>: <span class="string">"pencil"</span>, <span class="string">"type"</span>: <span class="string">"no.1"</span> &#125;)</div><div class="line">    db.col.insertMany([</div><div class="line">    &#123; <span class="string">"item"</span>: <span class="string">"dog"</span>, <span class="string">"type"</span>: <span class="string">"no.2"</span> &#125;,</div><div class="line">    &#123; <span class="string">"item"</span>: <span class="string">"apple"</span>, <span class="string">"type"</span>: <span class="string">"no.3"</span> &#125;,</div><div class="line">    &#123; <span class="string">"item"</span>: <span class="string">"orange"</span>, <span class="string">"type"</span>: <span class="string">"no.4"</span> &#125;</div><div class="line">    ])</div></pre></td></tr></table></figure>
<h4 id="2、删除："><a href="#2、删除：" class="headerlink" title="2、删除："></a>2、删除：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">db.col.remove(&#123;&#125;)                    <span class="comment">##删除所有数据</span></div><div class="line">db.col.remove(query &lt;,options&gt;)</div><div class="line">    <span class="comment">#  query: 查询条件(数据索引或名字)</span></div><div class="line">    <span class="comment">#  ptions:两个可选参数</span></div><div class="line">    <span class="comment">#      &#123;justOne: &lt;boolean&gt;,     //默认false，删除所有匹配到的。</span></div><div class="line">    <span class="comment">#       writeConcern: &lt;document&gt;//抛出异常的级别。</span></div><div class="line">    <span class="comment">#      &#125;</span></div><div class="line">db.col.deleteOne(query &lt;,options&gt;)   <span class="comment">##同上，无justOne参数，只删除第一条</span></div><div class="line">db.col.deleteMany(query &lt;,options&gt;)  <span class="comment">##同上，无justOne参数，只删除多条</span></div></pre></td></tr></table></figure>
<h3 id="3、更新："><a href="#3、更新：" class="headerlink" title="3、更新："></a>3、更新：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">db.col.update(query, update &lt;,options&gt;)</div><div class="line">    <span class="comment">#  query:  查询条件(数据索引或名字)</span></div><div class="line">    <span class="comment">#  update: 更新的内容，语法：&#123;$set:query&#125;</span></div><div class="line">    <span class="comment">#  options:三个可选参数</span></div><div class="line">    <span class="comment">#      &#123;upsert: &lt;boolean&gt;,      //如果不存在update的记录，是否插入新数据，默认:false。</span></div><div class="line">    <span class="comment">#       multi: &lt;boolean&gt;,       //只更新找到的第一条记录，默认是false,如果为true,多条记录全部更新。</span></div><div class="line">    <span class="comment">#       writeConcern: &lt;document&gt;//#抛出异常的级别。</span></div><div class="line">    <span class="comment">#      &#125;</span></div><div class="line"><span class="comment">##例如：</span></div><div class="line">    db.col.update(</div><div class="line">        &#123;<span class="string">"type"</span>: <span class="string">"no.1"</span>&#125;, </div><div class="line">        &#123;<span class="variable">$set</span>: &#123;<span class="string">"item"</span>: <span class="string">"human"</span>&#125;&#125;, </div><div class="line">        &#123;upsert: <span class="literal">true</span>, multi: <span class="literal">true</span>&#125;</div><div class="line">        )</div><div class="line">db.col.updateOne()                    <span class="comment">##同上，无multi参数，只更新第一条</span></div><div class="line">db.col.updateMany()                   <span class="comment">##同上，无multi参数</span></div><div class="line">db.col.replaceOne()                   <span class="comment">##同updateOne</span></div><div class="line">db.col.save(document &lt;,writeConcern&gt;) <span class="comment">##通过传入的文档整个替换</span></div></pre></td></tr></table></figure>
<h5 id="insert-与-save的区别"><a href="#insert-与-save的区别" class="headerlink" title="insert 与 save的区别"></a>insert 与 save的区别</h5><p>如果插入的数据的_id相同,save将会更新该文档,而insert将会报错</p>
<h5 id="update常用操作符"><a href="#update常用操作符" class="headerlink" title="update常用操作符"></a>update常用操作符</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$set</span>         <span class="comment">##当文档中包含该字段的时候,更新该字段,如果该文档中没有该字段,则为本文档添加一个字段.</span></div><div class="line"><span class="variable">$unset</span>       <span class="comment">##删除文档中的一个字段.</span></div><div class="line"><span class="variable">$rename</span>      <span class="comment">##重命名某个列</span></div><div class="line"><span class="variable">$inc</span>         <span class="comment">##增长某个列</span></div><div class="line"><span class="variable">$setOnInsert</span> <span class="comment">##当upsert为true时,并且发生了insert操作时,可以补充的字段</span></div><div class="line"><span class="variable">$push</span>        <span class="comment">##将一个数字存入一个数组,分为三种情况,如果该字段存在,则直接将数字存入数组.如果该字段不存在,创建字段并且将数字插入该数组.如果更新的字段不是数组,会报错的.</span></div><div class="line"><span class="variable">$pushAll</span>     <span class="comment">##将多个数值一次存入数组.上面的push只能一个一个的存入</span></div><div class="line"><span class="variable">$addToSet</span>    <span class="comment">##与$push功能相同将一个数字存入数组,不同的是如果数组中有这个数字,将不会插入,只会插入新的数据,同样也会有三种情况,与$push相同.</span></div><div class="line"><span class="variable">$pop</span>         <span class="comment">##删除数组最后一个元素</span></div><div class="line"><span class="variable">$pull</span>        <span class="comment">##删除数组中的指定的元素,如果删除的字段不是数组,会报错</span></div><div class="line"><span class="variable">$pullAll</span>     <span class="comment">##删除数组中的多个值,跟pushAll与push的关系类似.</span></div></pre></td></tr></table></figure>
<h3 id="4、查询"><a href="#4、查询" class="headerlink" title="4、查询"></a>4、查询</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">db.col.find(&#123;&#125;)          <span class="comment">##查询所有文档</span></div><div class="line">db.col.find().pretty()   <span class="comment">##以易读的方式来读取数据</span></div><div class="line">db.collection.find(query, projection)</div><div class="line">    <span class="comment">#  query：查询条件(数据索引或名字)</span></div><div class="line">    <span class="comment">#  projection：可选。指定返回的字段。</span></div></pre></td></tr></table></figure>
<h4 id="4-1、深入查询表达式"><a href="#4-1、深入查询表达式" class="headerlink" title="4.1、深入查询表达式"></a>4.1、深入查询表达式</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line">db.col.find()<span class="comment">##查询所有</span></div><div class="line">db.col.find(&#123;filed: value&#125;)                              <span class="comment">##等值查询</span></div><div class="line">db.col.find(&#123;filed: &#123;<span class="variable">$ne</span>: value&#125;&#125;)                       <span class="comment">##不等于 $ne</span></div><div class="line">db.col.find(&#123;filed: &#123;<span class="variable">$nin</span>: [value1, value2, ...]&#125;&#125;)      <span class="comment">##不能包含给定的值 $nin</span></div><div class="line">db.col.find(&#123;filed: &#123;<span class="variable">$all</span>: [value1, value2, ...]&#125;&#125;)      <span class="comment">##必须包含所有给定的值 $all</span></div><div class="line">db.col.find(&#123;filed: &#123;<span class="variable">$in</span>: [value1, value2, ...]&#125;&#125;)       <span class="comment">##只要包含一个或多个给定的值 $in</span></div><div class="line">db.col.find(&#123;filed: &#123;<span class="variable">$exists</span>:1&#125;&#125;)                        <span class="comment">##存在filed字段的</span></div><div class="line">db.col.find(&#123;filed: &#123;<span class="variable">$exists</span>:0&#125;&#125;)                        <span class="comment">##不存在filed字段的</span></div><div class="line">db.col.find(&#123;filed: &#123;<span class="variable">$mod</span>:[3,1]&#125;&#125;)                       <span class="comment">##模三余一，$mod(取模操作)</span></div><div class="line">db.col.find(&#123;<span class="variable">$or</span>: [&#123;filed1: vulue1&#125;, &#123;filed2: vulue2&#125;]&#125;) <span class="comment">##或 $or</span></div><div class="line">db.col.find(&#123;<span class="variable">$nor</span>: [&#123;filed1: vulue1&#125;, &#123;filed2: vulue2&#125;]&#125;)<span class="comment">##排除 $nor</span></div><div class="line">db.col.find(&#123;filed: &#123;<span class="variable">$size</span>: 3&#125;&#125;)                         <span class="comment">##返回值得数组是给定的长度(3) $size</span></div><div class="line">db.col.find(&#123;<span class="variable">$where</span>: <span class="function"><span class="title">function</span></span>()&#123;<span class="built_in">return</span> ...&#125;&#125;)            <span class="comment">##回调，隐式迭代，符合条件才返回</span></div><div class="line">db.col.find(&#123;<span class="variable">$where</span>: <span class="string">'...'</span>&#125;&#125;)                            <span class="comment">##同上</span></div><div class="line">db.col.find(&#123;age: &#123;<span class="variable">$lt</span>: 5&#125;&#125;).<span class="built_in">limit</span>(3)                    <span class="comment">##查询age的值小于5，限制3条</span></div><div class="line">    <span class="comment">#范围查询：</span></div><div class="line">    <span class="comment">#    $lt  （小于）</span></div><div class="line">    <span class="comment">#    $gt  （大于）</span></div><div class="line">    <span class="comment">#    $lte （小于等于）</span></div><div class="line">    <span class="comment">#    $gte （大于等于）</span></div><div class="line">    <span class="comment">#    limit（限制显示）</span></div><div class="line">db.col.find().skip(2).<span class="built_in">limit</span>(3)                           <span class="comment">##跳过前两个文档查询后面三个</span></div><div class="line">    <span class="comment">#  skip(num):表示跳过前面num个文档</span></div><div class="line">db.col.find().sort(&#123;age: 1&#125;)                             <span class="comment">##查询后以age升序排列显示</span></div><div class="line">    <span class="comment">#  sort():排序，这里 1 代表升序, -1 代表降序.</span></div><div class="line">db.col.find(&#123;filed: /user.*/i&#125;)                          <span class="comment">##正则，查询filed以user开头不区分大小写（正则效率低）</span></div><div class="line">db.col.find(&#123;filed: &#123;<span class="variable">$type</span>: 1&#125;&#125;)                         <span class="comment">##查找filed为双精度的文档</span></div><div class="line">    <span class="comment"># 根据数据类型查询 $type</span></div><div class="line">    <span class="comment">#      |类型　　　　　　　　|编号|</span></div><div class="line">    <span class="comment">#      |双精度　　　　　　　|1 　|</span></div><div class="line">    <span class="comment">#      |字符串　　　　　　　|2 　|</span></div><div class="line">    <span class="comment">#      |对象　　　　　　　　|3   |</span></div><div class="line">    <span class="comment">#      |数组　　　　　　　　|4   |</span></div><div class="line">    <span class="comment">#      |二进制数据　　　　　|5   |</span></div><div class="line">    <span class="comment">#      |对象ID　　　　　　　|7   |</span></div><div class="line">    <span class="comment">#      |布尔值　　　　　　　|8   |</span></div><div class="line">    <span class="comment">#      |日期　　　　　　　　|9   |</span></div><div class="line">    <span class="comment">#      |空　　　　　　　　　|10  |</span></div><div class="line">    <span class="comment">#      |正则表达式　　　　　|11  |</span></div><div class="line">    <span class="comment">#      |JavaScript　　　　|13  |</span></div><div class="line">    <span class="comment">#      |符号　　　　　　　　|14  |</span></div><div class="line">    <span class="comment">#      |JavaScript(带范围)|15  |</span></div><div class="line">    <span class="comment">#      |32位整数　　　　　　|16  |</span></div><div class="line">    <span class="comment">#      |时间戳　　　　　　　|17  |</span></div><div class="line">    <span class="comment">#      |64位整数　　　　　　|18  |</span></div><div class="line">    <span class="comment">#      |最小键　　　　　　　|255 |</span></div><div class="line">    <span class="comment">#      |最大键　　　　　　　|127 |</span></div></pre></td></tr></table></figure>
<h4 id="4-2、group分组查询"><a href="#4-2、group分组查询" class="headerlink" title="4.2、group分组查询"></a>4.2、group分组查询</h4><p>group做的聚合有些复杂。先选定分组所依据的键，此后MongoDB就会将集合依据选定键值的不同分成若干组。然后可以通过聚合每一组内的文档，产生一个结果文档。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">group(&#123;</div><div class="line">  key:&#123;字段:1&#125;,</div><div class="line">  initial:&#123;变量:初始值&#125;,</div><div class="line">  <span class="variable">$reduce</span>:<span class="keyword">function</span>(doc,prev)&#123;函数代码&#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<p>其中key下的字段代表,需要按哪个字段分组.<br>initial下的变量表示这一个分组中会使用的变量,并且给一个初始值.可以在后面的$reduce函数中使用.<br>$reduce的两个参数,分别代表当前的文档和上个文档执行完函数后的结果.</p>
<p>栗子：如下我们按年龄分组,同级不同年龄的用户的多少:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">db.user.find()</div><div class="line">    &#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"5198c286c686eb50e2c843b2"</span>), <span class="string">"name"</span> : <span class="string">"user0"</span>, <span class="string">"age"</span> : 0 &#125;</div><div class="line">    &#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"5198c286c686eb50e2c843b3"</span>), <span class="string">"name"</span> : <span class="string">"user1"</span>, <span class="string">"age"</span> : 1 &#125;</div><div class="line">    &#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"5198c286c686eb50e2c843b4"</span>), <span class="string">"name"</span> : <span class="string">"user2"</span>, <span class="string">"age"</span> : 2 &#125;</div><div class="line">    &#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"5198c286c686eb50e2c843b5"</span>), <span class="string">"name"</span> : <span class="string">"user3"</span>, <span class="string">"age"</span> : 1 &#125;</div><div class="line">    &#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"5198c286c686eb50e2c843b6"</span>), <span class="string">"name"</span> : <span class="string">"user4"</span>, <span class="string">"age"</span> : 1 &#125;</div><div class="line">    &#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"5198c286c686eb50e2c843b7"</span>), <span class="string">"name"</span> : <span class="string">"user5"</span>, <span class="string">"age"</span> : 2 &#125;</div><div class="line"></div><div class="line">db.user.group(&#123;</div><div class="line">    key:&#123;age:1&#125;,</div><div class="line">    initial:&#123;count:0&#125;,</div><div class="line">    <span class="variable">$reduce</span>:<span class="keyword">function</span>(doc,prev)&#123;</div><div class="line">        prev.count++</div><div class="line">    &#125;</div><div class="line">&#125;); </div><div class="line">    [</div><div class="line">        &#123;<span class="string">"age"</span>: 0, <span class="string">"count"</span>: 1&#125;,</div><div class="line">        &#123;<span class="string">"age"</span>: 1, <span class="string">"count"</span>: 3&#125;,</div><div class="line">        &#123;<span class="string">"age"</span>: 2, <span class="string">"count"</span>: 2&#125;</div><div class="line">    ]</div><div class="line"></div><div class="line">db.user.group(&#123;</div><div class="line">    key:&#123;age:1&#125;,</div><div class="line">    initial:&#123;users:[]&#125;,</div><div class="line">    reduce:<span class="keyword">function</span>(doc,prev)&#123;</div><div class="line">        prev.users.push(doc.name)</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line">  [</div><div class="line">      &#123;<span class="string">"age"</span>: 0, <span class="string">"users"</span>: [<span class="string">"user0"</span>]&#125;,</div><div class="line">      &#123;<span class="string">"age"</span>: 1, <span class="string">"users"</span>: [<span class="string">"user1"</span>, <span class="string">"user3"</span>, <span class="string">"user4"</span>]&#125;,</div><div class="line">      &#123;<span class="string">"age"</span>: 2, <span class="string">"users"</span>: [<span class="string">"user2"</span>, <span class="string">"user5"</span>]&#125;</div><div class="line">  ]</div></pre></td></tr></table></figure></p>
<p>另外本函数还有两个可选参数 condition 和 finalize<br>condition就是分组的条件筛选类似mysql中的having<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">db.user.group(&#123;</div><div class="line">    key:&#123;age:1&#125;,</div><div class="line">    initial:&#123;users:[]&#125;,</div><div class="line">    <span class="variable">$reduce</span>:<span class="keyword">function</span>(doc,prev)&#123;</div><div class="line">        prev.users.push(doc.name)</div><div class="line">    &#125;,</div><div class="line">    condition:&#123;age:&#123;<span class="variable">$gt</span>:0&#125;&#125;&#125;)</div><div class="line">　<span class="comment">##筛选出age大于0的:</span></div><div class="line">[</div><div class="line">    &#123;<span class="string">"age"</span>: 1, <span class="string">"users"</span>: [<span class="string">"user1"</span>, <span class="string">"user3"</span>, <span class="string">"user4"</span>]&#125;,</div><div class="line">    &#123;<span class="string">"age"</span>: 2, <span class="string">"users"</span>: [<span class="string">"user2"</span>, <span class="string">"user5"</span>]&#125;</div><div class="line">]</div></pre></td></tr></table></figure></p>
<h4 id="4-3、count统计"><a href="#4-3、count统计" class="headerlink" title="4.3、count统计"></a>4.3、count统计</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">db.goods.count()            <span class="comment">##统计该集合总数</span></div><div class="line">db.goods.count(&#123;cat_id: 3&#125;) <span class="comment">##统计cat_id=3的总数</span></div></pre></td></tr></table></figure>
<h4 id="4-4、distinct排重"><a href="#4-4、distinct排重" class="headerlink" title="4.4、distinct排重"></a>4.4、distinct排重</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">db.user.find()</div><div class="line">   &#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"5198c286c686eb50e2c843b2"</span>), <span class="string">"name"</span> : <span class="string">"user0"</span>, <span class="string">"age"</span> : 0 &#125;</div><div class="line">   &#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"5198c286c686eb50e2c843b3"</span>), <span class="string">"name"</span> : <span class="string">"user1"</span>, <span class="string">"age"</span> : 1 &#125;</div><div class="line">   &#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"5198c286c686eb50e2c843b4"</span>), <span class="string">"name"</span> : <span class="string">"user2"</span>, <span class="string">"age"</span> : 2 &#125;</div><div class="line">   &#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"5198c286c686eb50e2c843b5"</span>), <span class="string">"name"</span> : <span class="string">"user3"</span>, <span class="string">"age"</span> : 1 &#125;</div><div class="line">   &#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"5198c286c686eb50e2c843b6"</span>), <span class="string">"name"</span> : <span class="string">"user4"</span>, <span class="string">"age"</span> : 1 &#125;</div><div class="line">   &#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"5198c286c686eb50e2c843b7"</span>), <span class="string">"name"</span> : <span class="string">"user5"</span>, <span class="string">"age"</span> : 2 &#125;</div><div class="line"></div><div class="line"> db.user.distinct(<span class="string">"age"</span>) <span class="comment">## 特殊,传入的参数直接是字符串,而不是对象;</span></div><div class="line">     [0, 1, 2]</div></pre></td></tr></table></figure>
<h4 id="4-5、子文档查询-elemMatch"><a href="#4-5、子文档查询-elemMatch" class="headerlink" title="4.5、子文档查询$elemMatch"></a>4.5、子文档查询$elemMatch</h4><p>elemMatch投影操作符将限制查询返回的数组字段的内容只包含匹配elemMatch条件的数组元素。<br>注意：<br>(1)数组中元素是内嵌文档。<br>(2)如果多个元素匹配$elemMatch条件，操作符返回数组中第一个匹配条件的元素。<br>假设集合school有如下数据：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line"> _id: 1,</div><div class="line"> zipcode: 63109,</div><div class="line"> students: [</div><div class="line">              &#123; name: <span class="string">"john"</span>, school: 102, age: 10 &#125;,</div><div class="line">              &#123; name: <span class="string">"jess"</span>, school: 102, age: 11 &#125;,</div><div class="line">              &#123; name: <span class="string">"jeff"</span>, school: 108, age: 15 &#125;</div><div class="line">           ]</div><div class="line">&#125;</div><div class="line">&#123;</div><div class="line"> _id: 2,</div><div class="line"> zipcode: 63110,</div><div class="line"> students: [</div><div class="line">              &#123; name: <span class="string">"ajax"</span>, school: 100, age: 7 &#125;,</div><div class="line">              &#123; name: <span class="string">"achilles"</span>, school: 100, age: 8 &#125;,</div><div class="line">           ]</div><div class="line">&#125;</div><div class="line">&#123;</div><div class="line"> _id: 3,</div><div class="line"> zipcode: 63109,</div><div class="line"> students: [</div><div class="line">              &#123; name: <span class="string">"ajax"</span>, school: 100, age: 7 &#125;,</div><div class="line">              &#123; name: <span class="string">"achilles"</span>, school: 100, age: 8 &#125;,</div><div class="line">           ]</div><div class="line">&#125;</div><div class="line">&#123;</div><div class="line"> _id: 4,</div><div class="line"> zipcode: 63109,</div><div class="line"> students: [</div><div class="line">              &#123; name: <span class="string">"barney"</span>, school: 102, age: 7 &#125;,</div><div class="line">           ]</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>下面的操作将查询邮政编码键值是63109的所有文档。 $elemMatch操作符将返回 students数组中的第一个匹配条件（内嵌文档的school键且值为102）的元素。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">db.school.find(&#123;zipcode: 63109 &#125;,&#123; students: &#123; <span class="variable">$elemMatch</span>: &#123; school: 102 &#125; &#125; &#125; );</div><div class="line"></div><div class="line">&#123;<span class="string">"_id"</span>: 1, <span class="string">"students"</span>: [&#123;<span class="string">"name"</span>:<span class="string">"john"</span>, <span class="string">"school"</span>:102, <span class="string">"age"</span>:10&#125;]&#125;</div><div class="line">&#123;<span class="string">"_id"</span>: 3&#125;</div><div class="line">&#123;<span class="string">"_id"</span>: 4, <span class="string">"students"</span>: [&#123;<span class="string">"name"</span>:<span class="string">"barney"</span>, <span class="string">"school"</span>:102, <span class="string">"age"</span>:7&#125;]&#125;</div></pre></td></tr></table></figure></p>
<p>查询结果说明：<br><code>_id为1的文档</code>，students数组包含多个元素中存在school键且值为102的元素，$elemMatch只返回一个匹配条件的元素。<br><code>_id为3的文档</code>，因为students数组中元素无法匹配$elemMatch条件，所以查询结果不包含”students”字段。</p>
<p>$elemMatch可以指定多个字段的限定条件，下面的操作将查询邮政编码键值是63109的所有文档。 $elemMatch操作符将返回 students数组中的第一个匹配条件（内嵌文档的school键且值为102且age键值大于10）的元素。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">db.school.find( &#123; zipcode: 63109 &#125;,&#123; students: &#123; <span class="variable">$elemMatch</span>: &#123; school: 102, age: &#123; <span class="variable">$gt</span>: 10&#125; &#125; &#125; &#125; );</div><div class="line"></div><div class="line">  &#123;<span class="string">"_id"</span>: 1, <span class="string">"students"</span>: [&#123;<span class="string">"name"</span>:<span class="string">"jess"</span>, <span class="string">"school"</span>:102, <span class="string">"age"</span>:11&#125;]&#125;</div><div class="line">  &#123;<span class="string">"_id"</span>: 3&#125;</div><div class="line">  &#123;<span class="string">"_id"</span>: 4&#125;</div></pre></td></tr></table></figure></p>
</div><div class="tags"><a href="/tags/mongodb/">mongodb</a></div><div class="post-share"><div class="bdsharebuttonbox"><span style="float:left;line-height: 28px;height: 28px;font-size:16px;font-weight:blod">分享到：</span><a href="#" data-cmd="more" class="bds_more"></a><a href="#" data-cmd="mshare" title="分享到一键分享" class="bds_mshare"></a><a href="#" data-cmd="fbook" title="分享到Facebook" class="bds_fbook"></a><a href="#" data-cmd="twi" title="分享到Twitter" class="bds_twi"></a><a href="#" data-cmd="linkedin" title="分享到linkedin" class="bds_linkedin"></a><a href="#" data-cmd="youdao" title="分享到有道云笔记" class="bds_youdao"></a><a href="#" data-cmd="evernotecn" title="分享到印象笔记" class="bds_evernotecn"></a><a href="#" data-cmd="weixin" title="分享到微信" class="bds_weixin"></a><a href="#" data-cmd="qzone" title="分享到QQ空间" class="bds_qzone"></a><a href="#" data-cmd="tsina" title="分享到新浪微博" class="bds_tsina"></a></div><div class="addToAny_share">分享到 : <a href="https://www.addtoany.com/share?linkurl=https://wpneu.github.io/2016/07/30/MongoDB学习笔记(2).html&amp;linkname=MongoDB学习笔记(2)" target="_blank"><img src="https://static.addtoany.com/buttons/a2a.svg" width="16" height="16" style="vertical-align:middle"></a>&nbsp;<a href="https://www.addtoany.com/add_to/twitter?linkurl=https://wpneu.github.io/2016/07/30/MongoDB学习笔记(2).html&amp;linkname=MongoDB学习笔记(2)" target="_blank"><img src="https://static.addtoany.com/buttons/twitter.svg" width="16" height="16" style="vertical-align:middle"></a>&nbsp;<a href="https://www.addtoany.com/add_to/baidu?linkurl=https://wpneu.github.io/2016/07/30/MongoDB学习笔记(2).html&amp;linkname=MongoDB学习笔记(2)" target="_blank"><img src="https://static.addtoany.com/buttons/baidu.svg" width="16" height="16" style="vertical-align:middle"></a>&nbsp;<a href="https://www.addtoany.com/add_to/facebook?linkurl=https://wpneu.github.io/2016/07/30/MongoDB学习笔记(2).html&amp;linkname=MongoDB学习笔记(2)" target="_blank"><img src="https://static.addtoany.com/buttons/facebook.svg" width="16" height="16" style="vertical-align:middle"></a>&nbsp;<a href="https://www.addtoany.com/add_to/google_plus?linkurl=https://wpneu.github.io/2016/07/30/MongoDB学习笔记(2).html&amp;linkname=MongoDB学习笔记(2)" target="_blank"><img src="https://static.addtoany.com/buttons/google_plus.svg" width="16" height="16" style="vertical-align:middle"></a>&nbsp;<a href="https://www.addtoany.com/add_to/linkedin?linkurl=https://wpneu.github.io/2016/07/30/MongoDB学习笔记(2).html&amp;linkname=MongoDB学习笔记(2)" target="_blank"><img src="https://static.addtoany.com/buttons/linkedin.svg" width="16" height="16" style="vertical-align:middle"></a>&nbsp;<a href="https://www.addtoany.com/add_to/email?linkurl=https://wpneu.github.io/2016/07/30/MongoDB学习笔记(2).html&amp;linkname=MongoDB学习笔记(2)" target="_blank"><img src="https://static.addtoany.com/buttons/email.svg" width="16" height="16" style="vertical-align:middle"></a>&nbsp;</div></div><div class="post-nav"><a href="/2016/08/12/Web包管理器-Bower.html" class="pre">好用的Web包管理器-Bower</a><a href="/2016/07/29/MongoDB学习笔记(1).html" class="next">MongoDB学习笔记</a></div><div id="comments"><div data-thread-key="2016/07/30/MongoDB学习笔记(2).html" data-title="MongoDB学习笔记(2)" data-url="https://wpneu.github.io/2016/07/30/MongoDB学习笔记(2).html" data-author-key="1" class="ds-thread"></div><div id="uyan_frame"></div></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#part2-CRUD操作-Creat-Read-Update-Delete"><span class="toc-text">part2 CRUD操作(Creat,Read,Update,Delete)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#一、基础："><span class="toc-text">一、基础：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#二、数据库操作："><span class="toc-text">二、数据库操作：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#三、文档操作（以-Collection-Name-col-为例）"><span class="toc-text">三、文档操作（以 Collection_Name = col 为例）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1、插入："><span class="toc-text">1、插入：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2、删除："><span class="toc-text">2、删除：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3、更新："><span class="toc-text">3、更新：</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#insert-与-save的区别"><span class="toc-text">insert 与 save的区别</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#update常用操作符"><span class="toc-text">update常用操作符</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4、查询"><span class="toc-text">4、查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1、深入查询表达式"><span class="toc-text">4.1、深入查询表达式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2、group分组查询"><span class="toc-text">4.2、group分组查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3、count统计"><span class="toc-text">4.3、count统计</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4、distinct排重"><span class="toc-text">4.4、distinct排重</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-5、子文档查询-elemMatch"><span class="toc-text">4.5、子文档查询$elemMatch</span></a></li></ol></li></ol></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/08/12/test.html">test</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/29/BlueLake博客主题的详细配置.html">BlueLake博客主题的详细配置</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/09/自定义HEXO站内搜索Javascript-json.html">自定义HEXO站内搜索Javascript+json</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/17/github博客迁移.html">github博客迁移</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/12/Web包管理器-Bower.html">好用的Web包管理器-Bower</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/30/MongoDB学习笔记(2).html">MongoDB学习笔记(2)</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/29/MongoDB学习笔记(1).html">MongoDB学习笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/30/Node.js 多进程.html">Node.js 多进程(17)</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/30/Node.js RESTful API.html">Node.js RESTful API(16)</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/30/Node.js Express 框架.html">Node.js Express 框架(15)</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Linux驱动/">Linux驱动</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo博客折腾/">hexo博客折腾</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/nodeJS学习笔记/">nodeJS学习笔记</a><span class="category-list-count">18</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端工具/">前端工具</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据库/">数据库</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/语言集成查询/">语言集成查询</a><span class="category-list-count">1</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/mongodb/" style="font-size: 15px;">mongodb</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/javascript/" style="font-size: 15px;">javascript</a> <a href="/tags/linq/" style="font-size: 15px;">linq</a> <a href="/tags/语言集成查询/" style="font-size: 15px;">语言集成查询</a> <a href="/tags/BlueLake/" style="font-size: 15px;">BlueLake</a> <a href="/tags/node/" style="font-size: 15px;">node</a> <a href="/tags/bower/" style="font-size: 15px;">bower</a> <a href="/tags/github/" style="font-size: 15px;">github</a> <a href="/tags/sublime/" style="font-size: 15px;">sublime</a> <a href="/tags/驱动/" style="font-size: 15px;">驱动</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-weibo"> 新浪微博</i></div><iframe width="100%" height="400" frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&amp;width=0&amp;height=400&amp;fansRow=2&amp;ptype=1&amp;speed=0&amp;skin=3&amp;isTitle=1&amp;noborder=1&amp;isWeibo=1&amp;isFans=0&amp;uid=2170658240&amp;verifier=1f582291&amp;dpc=1" class="share_self"></iframe></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> 友情链接</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">Baidu Site Haritası</a> |  <a href="/atom.xml">订阅</a> |  <a href="/about/">关于</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次</p><p><span> Copyright &copy;<a href="/." rel="nofollow">王志平(Gavin.Wang).</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?cadefac847f0a4087a8bfc06bff3bbf2";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();
</script><script type="text/javascript" src="/js/search.json.js?v=2.0.1"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.1" async></script><script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":["mshare","weixin","tsina","qzone","linkedin","fbook","twi","print","renren","sqq","evernotecn","bdysc","tqq","tqf","bdxc","kaixin001","tieba","douban","bdhome","thx","ibaidu","meilishuo","mogujie","diandian","huaban","duitang","hx","fx","youdao","sdo","qingbiji","people","xinhua","mail","isohu","yaolan","wealink","ty","iguba","h163","copy"],"bdPic":"","bdStyle":"1","bdSize":"16"},"share":{},"image":{"viewList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"],"viewText":"分享到：","viewSize":"16"},"selectShare":{"bdContainerClass":null,"bdSelectMiniList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"]}};with(document)0[(getElementsByTagName('head')[0]||head).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script><script>var duoshuoQuery = {short_name:'http://wpneu.oschina.io/'};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    document.getElementsByTagName('body')[0].appendChild(ds);
})();
</script><script src="http://v2.uyan.cc/code/uyan.js?uid=2140301"></script></body></html>